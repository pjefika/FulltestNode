import { Injectable } from '@angular/core';
import { SuperService } from 'util/superservice/super.service';
import { UrlService } from 'util/url-service/url.service';
import { Certification } from 'viewmodel/certification/certification';

@Injectable()
export class ListCertificationService extends SuperService {

    constructor(private urlService: UrlService) {
        super();
    }

    public getCertificationByCustomer(instancia: string): Promise<Certification[]> {
        // let usr = JSON.parse(sessionStorage.getItem('user'));
        let _data: { instancia: string };
        _data = { instancia: instancia };
        this.infoResquest = {
            rqst: "post",
            command: this.urlService.pathCustomerAPI + "certification/findByCustomer",
            _data: _data,
            timeout: 60000
        };
        return this.urlService.request(this.infoResquest)
            .then(response => {
                return response as Certification[]
            })
            .catch(this.handleError);
    }

    public getCertificationByCustomerMock(): Certification[] {
        return JSON.parse('[{"resultado":"OK","orientacao":"OK","id":"5a7b3aec933ae96046936f9b","blocks":[{"resultado":"OK","orientacao":"OK","asserts":[{"resultado":"OK","orientacao":"Não há bloqueio no Radius.","nome":"HAS_BLOQ_RADIUS"},{"resultado":"OK","orientacao":"Radius e Inventário de Rede OK.","nome":"IS_INV_REDE_EQUALS_RADIUS"},{"resultado":"OK","orientacao":"Inventário de Rede OK.","nome":"HAS_INV_REDE"},{"resultado":"OK","orientacao":"Inventário de Serviços OK.","nome":"HAS_INV_SERV"}],"nome":"CADASTRO"},{"resultado":"OK","orientacao":"OK","asserts":[{"resultado":"OK","orientacao":"Rede confiável.","nome":"IS_REDE_BANDA_OK"}],"nome":"PERFORMANCE"},{"resultado":"OK","orientacao":"OK","asserts":[{"resultado":"OK","orientacao":"Vlan de Banda configurado corretamente.","nome":"IS_VLANS_OK"},{"resultado":"OK","orientacao":"Profile configurado corretamente.","nome":"IS_PROFILE_OK"}],"nome":"SERVICOS"},{"resultado":"OK","orientacao":"OK","asserts":[{"resultado":"OK","orientacao":"Porta Ativada (Adm state Up).","nome":"IS_ADM_UP"},{"resultado":"OK","orientacao":"Sincronismo/Link OK.","nome":"IS_OPER_UP"},{"resultado":"OK","orientacao":"Parâmetros dentro dos padrões.","nome":"IS_PARAM_OK"},{"resultado":"OK","orientacao":"Modulação configurada corretamente.","nome":"IS_MODUL_OK"},{"resultado":"OK","orientacao":"Mac identificado 98:97:D1:E9:49:C8.","nome":"HAS_MAC_DSLAM"}],"nome":"CONECTIVIDADE"}],"dataInicio":1518025415735,"dataFim":1518025452034,"customer":{"designador":"CTA-81MMWYSLO-013","instancia":"4130886762","designadorAcesso":"CTA-17074589-069","designadorTv":"TV-CTA-81MMWYSLQ-050","rede":{"tipo":"METALICA","origem":"ONLINE","planta":"VIVO2","ipDslam":"10.141.228.90","vendorDslam":"KEYMILE","modeloDslam":"SUAD1","idOnt":null,"terminal":null,"ipMulticast":null,"nrc":null,"slot":1,"porta":27,"sequencial":27,"logica":27,"rin":391,"vlanVoip":1210,"vlanVod":3210,"vlanMulticast":4000,"cvlan":127,"bhs":null},"redeExterna":{"tipo":null,"origem":null,"planta":null,"splitter1n":null,"splitter2n":null,"caboAlim":null,"fibra1n":null,"fibra2n":null},"servicos":{"velDown":15360,"velUp":1024,"tipoTv":"DTH","tipoLinha":"TDM"},"linha":{"tipo":"IMS","dn":"4130886762","central":"PRCTA_VMS02"},"radius":{"status":"ATIVO","armario":"PRCTA_O1B73","rin":"391","velocidade":"15360 - 1024","ipFixo":"-","profile":"r1024b15360","porta":"27","isIpFixo":false},"asserts":[{"asserts":"DIVERGENCIA_TBS_RADIUS","value":false,"creationDate":1516133394532},{"asserts":"CIRCUITO_ATIVO","value":true,"creationDate":1516133394532},{"asserts":"HAS_BLOQUEIO_RADIUS","value":false,"creationDate":1516133394532}],"eventos":[]},"executor":"g0042204","fulltest":{"resultado":true,"dataInicio":1518025415933,"dataFim":1518025451725,"mensagem":"Não foram identificados problemas de configuração. Se o problema/sintoma informado pelo cliente persiste, seguir o fluxo.","id":null,"cl":{"designador":"CTA-81MMWYSLO-013","instancia":"4130886762","designadorAcesso":"CTA-17074589-069","designadorTv":"TV-CTA-81MMWYSLQ-050","rede":{"tipo":"METALICA","origem":"ONLINE","planta":"VIVO2","ipDslam":"10.141.228.90","vendorDslam":"KEYMILE","modeloDslam":"SUAD1","idOnt":null,"terminal":null,"ipMulticast":null,"nrc":null,"slot":1,"porta":27,"sequencial":27,"logica":27,"rin":391,"vlanVoip":1210,"vlanVod":3210,"vlanMulticast":4000,"cvlan":127,"bhs":null},"redeExterna":{"tipo":null,"origem":null,"planta":null,"splitter1n":null,"splitter2n":null,"caboAlim":null,"fibra1n":null,"fibra2n":null},"servicos":{"velDown":15360,"velUp":1024,"tipoTv":"DTH","tipoLinha":"TDM"},"linha":{"tipo":"IMS","dn":"4130886762","central":"PRCTA_VMS02"},"radius":{"status":"ATIVO","armario":"PRCTA_O1B73","rin":"391","velocidade":"15360 - 1024","ipFixo":"-","profile":"r1024b15360","porta":"27","isIpFixo":false},"asserts":[{"asserts":"DIVERGENCIA_TBS_RADIUS","value":false,"creationDate":1516133394532},{"asserts":"CIRCUITO_ATIVO","value":true,"creationDate":1516133394532},{"asserts":"HAS_BLOQUEIO_RADIUS","value":false,"creationDate":1516133394532}],"eventos":[]},"valids":[{"nome":"Estado Administrativo da Porta","mensagem":"Porta Ativada (Adm state Up).","resultado":true,"foiCorrigido":false,"result":{"nome":"Estado da Porta","type":"telecom.properties.EstadoDaPorta","adminState":true,"operState":true}},{"nome":"Estado Operacional da Porta","mensagem":"Sincronismo OK.","resultado":true,"foiCorrigido":null,"result":{"nome":"Estado da Porta","type":"telecom.properties.EstadoDaPorta","adminState":true,"operState":true}},{"nome":"Parâmetros","mensagem":"Parâmetros dentro dos padrões.","resultado":true,"foiCorrigido":null,"result":{"nome":"Parâmetros","type":"telecom.properties.metalico.TabelaParametrosMetalico","snrDown":7,"snrUp":9,"atnDown":4,"atnUp":2,"velSincDown":17661,"velSincUp":1175,"velMaxDown":22596,"velMaxUp":1273}},{"nome":"Confiabilidade de Rede","mensagem":"Rede confiável.","resultado":true,"foiCorrigido":false,"result":{"nome":"Confiabilidade de Rede","type":"telecom.properties.metalico.TabelaRedeMetalico","pctDown":92830259,"pctUp":175373372,"crcDown":784,"crcUp":0,"fecDown":0,"fecUp":1,"resync":2,"tempoMedicao":1900800,"crcOk":true,"pctSuficiente":true}},{"nome":"Modulação","mensagem":"Modulação configurada corretamente.","resultado":true,"foiCorrigido":false,"result":{"nome":"Modulação","type":"telecom.properties.metalico.Modulacao","modulacao":"ADSL2PLUS_ONLY_SUAD1","modulEnum":"ADSL"}},{"nome":"Profile","mensagem":"Profile configurado corretamente.","resultado":true,"foiCorrigido":false,"result":{"nome":"Profile","type":"telecom.properties.ProfileMetalico","profileUp":"1","profileDown":"15","down":"VEL_15360","up":"VEL_1024"}},{"nome":"Vlan Banda Larga","mensagem":"Vlan de Banda configurado corretamente.","resultado":true,"foiCorrigido":false,"result":{"nome":"Vlan Banda Larga","type":"telecom.properties.VlanBanda","cvlan":127,"svlan":391,"pctDown":null,"pctUp":null,"state":"UP"}},{"nome":"Vlan VoIP","mensagem":"Cliente sem VoIP.","resultado":true,"foiCorrigido":false,"result":null},{"nome":"Vlan VoD/IPTV","mensagem":"Cliente sem TV Híbrida/IPTV.","resultado":true,"foiCorrigido":false,"result":null},{"nome":"MAC do Equipamento","mensagem":"Mac identificado 98:97:D1:E9:49:C8.","resultado":true,"foiCorrigido":null,"result":{"nome":"MAC do Equipamento","type":"telecom.properties.DeviceMAC","mac":"98:97:D1:E9:49:C8"}}]}}]')
    }

}